extends base

mixin social-media-share
  .share-bar
    p.share-title()= 'Compartilhe'
    .share-icons-container
      a.share-icon.fa.fa-facebook.fa-3x(href='https://www.facebook.com/sharer/sharer.php?u=#{config.url}#{page.url}%3Freferer=bdf_button_facebook' target='_blank' title='Compartilhar no Facebook')
      a.share-icon.fa.fa-twitter.fa-3x(href='https://twitter.com/share?url=#{config.url}#{page.url}%3Freferer=bdf_button_twitter' target='_blank' title='Compartilhar no Twitter')
      a.share-icon.share-mobile.fa.fa-whatsapp.fa-3x(href='whatsapp://send?text=#{config.url}#{page.url}%3Freferer=bdf_button_whatsapp' data-action='share/whatsapp/share' title='Compartilhar no whatsapp')

block markup
  script(type="application/ld+json").
   {
    "@context": "http://schema.org",
    "@type": "NewsArticle",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "#{page.url}"
    },
    "about": "#{page.hat}",
    "contentLocation": "#{page.place}",
    "headline": "#{page.title}",
    "articleBody": "#{page.content}",
    "image": {
      "@type": "ImageObject",
      "url": "https:#{page.cover['medium']}",
      "height": 464,
      "width": 696
    },
    "datePublished": "#{utc_to_brt(page.date)}",
    "dateModified": "#{page.updated_at}",
    "author": {
      "@type": "Person",
      "name": "#{page.author}"
    },
     "publisher": {
      "@type": "Organization",
      "name": "Brasil de Fato",
      "logo": {
        "@type": "ImageObject",
        "url": "https://google.com/logo.jpg",
        "width": 600,
        "height": 60
      }
    },
    "description": "#{page.description}"
   }
  
  
block title
  title= titlecase(page.title) + " - " + titlecase(page.area) + " - Brasil de Fato"

block description
  meta(name="description" content=page.description)

block open_graph
  include _partial/open_graph_page
  include _partial/twitter_meta_page

append content
  main.grid-3-columns
    if page.area=="espanol"
      - var language= "es"
    else
      - var language= null

    article#post(lang= language)
      header
        - var published_at = utc_to_brt(page.date)
        span.hat= page.hat
        h2.title= page.title
        p.description= page.description
        .details-bar
          .author-time
            span.author(rel="author")= page.author
            .place-and-time
              span.place= page.place + ', '
              time= full_date(published_at)
          +social-media-share
        if page.cover
          figure
            - var imageCaption = page.cover.subtitle + ' / ' + page.cover.credits
            - var imageDescription = page.cover.subtitle + ' - Cr√©ditos: ' + page.cover.credits
            img(alt=imageDescription src=page.cover['medium'])  
            figcaption= imageCaption

      .content
        != page.content
      footer
        +social-media-share
