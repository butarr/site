extends base
include _partial/audio_player

mixin news_list(title, list)
  .other-bar
    h2.other-title= title
    .other-article-container(itemscope itemtype="https://schema.org/ItemList")
      each p,i in list
        - var articleId = "other-" + i
        ul(id=articleId itemprop="itemListElement" class="other-article" class="spacing")
          li
            a(itemprop="url" href=p.url)
              h3.other-article-title(itemprop="headline")= p.title

mixin adsense_04_desktop()
  if config.toggles._D6fenTno_adsense
    div.adsense-04-desktop(align="center")
      != '<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>'
      != '<!-- desktop_04 -->'
      != '<ins class="adsbygoogle"'
      !=      'style="display:inline-block;width:200px;height:200px"'
      !=      'data-ad-client="ca-pub-9026445537434187"'
      !=      'data-ad-slot="8095415750"></ins>'
      != '<script>'
      != '(adsbygoogle = window.adsbygoogle || []).push({});'
      != '</script>'

block title
  title= `${titlecase(page.title)} ${config.separator} ${config.title}`

block description
  meta(name="description" content=page.description)

block canonical
  link(href=`https://www.brasildefato.com.br${page.url}` rel="canonical")

block keywords
  meta(name="keywords" content=`${page.hat}, ${page.area}`)

block open_graph
  include _partial/open_graph_page
  include _partial/twitter_meta_page

append content
  main(class='grid-4-columns')
    if page.area=="espanol"
      - var language= "es"
    else
      - var language= null

    article#post(itemscope itemtype="http://schema.org/NewsArticle" lang= language)

      meta(itemprop="mainEntityOfPage" content=`https://www.brasildefato.com.br${page.url}`)
      div(itemprop="publisher" itemscope itemtype="https://schema.org/Organization")
        div(itemprop="logo" itemscope itemtype="https://schema.org/ImageObject")
          meta(itemprop="url" content="https://brasildefato.com.br/img/logo-microdata.jpg")
          meta(itemprop="width" content="600")
          meta(itemprop="height" content="60")
        meta(itemprop="name" content="Brasil de Fato")
        link(itemprop="sameAs" href="https://www.brasildefato.com.br")

        - var area_field= page.area
        - var sitepath = page.area
        case area_field
          when "opiniao"
            - var sitepath= "opinião"
          when "politica"
            - var sitepath= "política"
          when "direitos_humanos"
            - var sitepath= "direitos humanos"
          when "espanol"
            - var sitepath= "español"
          when "radioagencia"
            - var sitepath= "radioagência"

      if config.toggles._yEE1E9Vp_breadcrumb
        div#breadcrumb
          ol(itemscope itemtype="http://schema.org/BreadcrumbList")
            li(itemprop="itemListElement")
              a(href="/")
                p Início
            li
              i(class="fa fa-chevron-right fa-lg")
            li(itemprop="itemListElement")
              a(href=`${config.url}/${page.area}/`)
                p.breadcrumb-last= sitepath

      header
        - var published_at = utc_to_brt(page.date)
        h3.hat(itemprop="about")= page.hat
        h1.title(itemprop="headline")= page.title
        h2.description(itemprop="description")= page.description

        .details-bar
          .author-time
            address.author(rel="author" itemprop="author")= page.author
            .place-and-time
              span.place(itemprop="contentLocation")= page.place + ', '
              time(itemprop="datePublished" datetime=published_at.toISOString())= full_date(published_at)
              meta(itemprop="dateModified" content=published_at.toISOString())
          .share-mobile
            include _partial/social-media-share

        if page.audio
          p.listen-audio Ouça a matéria:
          +audio-player(0, page.audio)

        if page.cover
          figure(itemprop="image" itemscope itemtype="http://schema.org/ImageObject")
            - var imageCaption = page.cover.subtitle + ' / ' + page.cover.credits
            - var imageDescription = page.cover.subtitle + ' - Créditos: ' + page.cover.credits
            .img-container
              img(itemprop="url" alt=imageDescription src=page.cover['medium'])
              meta(itemprop="width" content="696")
              meta(itemprop="height" content="464")
            figcaption(itemprop="caption")= imageCaption

      .content(itemprop="articleBody")
        .text-content
          != page.content
          .content-footer
            include _partial/social-media-share
        aside.sidebar(itemscope itemtype="http://schema.org/WPSideBar")
          include _partial/social-media-share

          if page.related_news && page.related_news.length
            +news_list('Relacionadas', page.related_news)

          if site.data.advertisings.advertising_06
            - var post=site.data.advertisings.advertising_06
            .advertising_06(itemscope itemtype="http://schema.org/WPAdBlock")
              a(itemprop="url" href=post.link target="_blank")
                img(src=post.image alt=post.title title=post.title itemprop="image")
          else
            +adsense_04_desktop()

          if page.other_news && page.other_news.length
            +news_list('Outras notícias', page.other_news)
