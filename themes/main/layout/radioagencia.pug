extends base
include _partial/audio_player

mixin metadata(position, post)
  meta(itemprop="url" content=`https://www.brasildefato.com.br/${post.path}`)
  meta(itemprop="position" content=position)

  span(itemscope itemtype="https://schema.org/NewsArticle")
    - var published_at = utc_to_brt(page.date)
    meta(itemprop="mainEntityOfPage" content=`https://www.brasildefato.com.br/${sitepath}/`)
    meta(itemprop="dateModified" content=published_at.toISOString())

    span(itemprop="publisher" itemscope itemtype="https://schema.org/Organization")
      span(itemprop="logo" itemscope itemtype="https://schema.org/ImageObject")
        meta(itemprop="url" content="https://www.brasildefato.com.br/img/logo-microdata.jpg")
        meta(itemprop="width" content="600")
        meta(itemprop="height" content="60")
      meta(itemprop="name" content="Brasil de Fato")
      link(itemprop="sameAs" href="https://www.brasildefato.com.br")

block title
  title=`Radioagência ${config.separator} ${config.title}`

block description
  meta(name="description" content="As notícias do Brasil de Fato em áudio e texto para rádios do Brasil e da América Latina em nossa Radioagência BdF.")

block canonical
  link(href="https://www.brasildefato.com.br/radioagencia/" rel="canonical")

block keywords
  meta(name="keywords" content="Radioagência")

block open_graph
  meta(property="og:title" content=`Radioagência | ${config.title}`)
  meta(property="og:description" content=config.description)
  meta(property="og:image" content=`${config.url}/img/share-logo.png`)

append content
  main.grid-radio
    section#radio(class= "list" itemscope itemtype="http://schema.org/ItemList" lang= language)
      - var sidebar = 'sidebar_disabled'
      if config.toggles.radio_sidebar
        - sidebar = 'sidebar_enabled'
      div(class=`main_${sidebar}`)
        if page.featured_01
          - var featured = page.featured_01
          - var published_at_featured = utc_to_brt(featured.date)
          .news-radio(itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class= "divisor")
            +metadata(0, featured)
            div#featured-audio-news
              .image
                - var imageDescription= featured.cover.subtitle + ' - Créditos: ' + featured.cover.credits
                figure(itemscope itemtype="https://schema.org/ImageObject")
                  img(itemprop="image" src=featured.cover.medium alt=imageDescription title=imageDescription)
              .info-news
                a(href=featured.url itemprop="url" class="news-radio-link")
                  h2.title-featured(itemprop= "headline")= featured.title
                  p.description(itemprop="description")= featured.description
                time.date(datetime=published_at_featured.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at_featured)
            if featured.audio
              +audio-player(0, featured.audio)

        - var position= 1
        each post in page.latest_news
          - var published_at_post = utc_to_brt(post.date)
          .news-radio(itemscope itemtype="https://schema.org/ListItem" itemprop="itemListElement" class= "divisor")
            +metadata(position, post)
            a(href=post.url itemprop="url" class="news-radio-link")
              h2.title(itemprop= "headline")= post.title
              p.description(itemprop="description")= post.description
            time.date(datetime=published_at_post.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at_post)
            if post.audio
              +audio-player(position, post.audio)
            - position++

      if config.toggles.radio_sidebar
        aside.sidebar(hidden itemscope itemtype="http://schema.org/WPSideBar")
          if page.column
            h3.section-name Coluna
            - var column = page.column
            - var columnist = site.data.columnists[column.columnist];
            .columnist(itemprop="itemListElement" itemscope itemtype="https://schema.org/Person")
              .photo
                a(href=column.path, title="link para a pagina do colunista")
                  img(alt=`Foto de ${columnist.name}` src=columnist.photo itemprop="image")
              .column
                a(href=column.path, title="link para a pagina do colunista")
                  span.name(itemprop="name")= columnist.name
                a(href=column.path itemprop="url")
                  h2.title= column.title
            if column.audio
              +audio-player(555, column.audio)
          h3.section-name Serviços

          .service
            - var service = page.service_01
            - var published_at = utc_to_brt(service.date)
            h4(style="color:#845c7d;") Hoje na História
            h5=service.title
            time.date(datetime=published_at.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at)
            if service.audio
              +audio-player(101, service.audio)
          .service
            - service = page.service_02
            - published_at = utc_to_brt(service.date)
            h4(style="color:#419b9b;") Alimento é saúde
            h5=service.title
            time.date(datetime=published_at.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at)
            if service.audio
              +audio-player(102, service.audio)
          .service
            - service = page.service_03
            - published_at = utc_to_brt(service.date)
            h4(style="color:#c33b53;") Nossos direitos
            h5=service.title
            time.date(datetime=published_at.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at)
            if service.audio
              +audio-player(103, service.audio)
          .service
            - service = page.service_04
            - published_at = utc_to_brt(service.date)
            h4(style="color:#af61a4;") Fatos Curiosos da História
            h5=service.title
            time.date(datetime=published_at.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at)
            if service.audio
              +audio-player(104, service.audio)
          .service
            - service = page.service_05
            - published_at = utc_to_brt(service.date)
            h4(style="color:#d2a64c;") Mosaico Cultural
            h5=service.title
            time.date(datetime=published_at.toISOString(), itemprop="datePublished")= 'Publicado em ' + full_date(published_at)
            if service.audio
              +audio-player(105, service.audio)


          h3.section-name Newsletter
          h4.button Cadastre aqui
          .facebook
            include _partial/modules/module_facebook
